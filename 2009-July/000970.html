<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenFDM-svn] r1008 - branches/OpenFDM-StateSeparation/src/test
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openfdm-svn/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:openfdm-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenFDM-svn%5D%20r1008%20-%20branches/OpenFDM-StateSeparation/src/test&In-Reply-To=%3C200907171803.n6HI3FY2005358%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000969.html">
   <LINK REL="Next"  HREF="000971.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenFDM-svn] r1008 - branches/OpenFDM-StateSeparation/src/test</H1>
    <B>frohlich at BerliOS</B> 
    <A HREF="mailto:openfdm-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenFDM-svn%5D%20r1008%20-%20branches/OpenFDM-StateSeparation/src/test&In-Reply-To=%3C200907171803.n6HI3FY2005358%40sheep.berlios.de%3E"
       TITLE="[OpenFDM-svn] r1008 - branches/OpenFDM-StateSeparation/src/test">frohlich at mail.berlios.de
       </A><BR>
    <I>Fri Jul 17 20:03:15 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000969.html">[OpenFDM-svn] r1007 - branches/OpenFDM-StateSeparation/src/OpenFDM
</A></li>
        <LI>Next message: <A HREF="000971.html">[OpenFDM-svn] r1009 - branches/OpenFDM-StateSeparation/src/test
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#970">[ date ]</a>
              <a href="thread.html#970">[ thread ]</a>
              <a href="subject.html#970">[ subject ]</a>
              <a href="author.html#970">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: frohlich
Date: 2009-07-17 20:03:15 +0200 (Fri, 17 Jul 2009)
New Revision: 1008

Added:
   branches/OpenFDM-StateSeparation/src/test/drop.cpp
Modified:
   branches/OpenFDM-StateSeparation/src/test/Makefile.am
   branches/OpenFDM-StateSeparation/src/test/mechanic.cpp
Log:
Add simple drop test.

AM   test/drop.cpp
M    test/mechanic.cpp
M    test/Makefile.am


Modified: branches/OpenFDM-StateSeparation/src/test/Makefile.am
===================================================================
--- branches/OpenFDM-StateSeparation/src/test/Makefile.am	2009-07-17 18:02:41 UTC (rev 1007)
+++ branches/OpenFDM-StateSeparation/src/test/Makefile.am	2009-07-17 18:03:15 UTC (rev 1008)
@@ -1,48 +1,65 @@
 INCLUDES = -I$(srcdir)/..
 
+# define some unit tests
+TESTS = \
+	constintegral \
+	harmonic \
+	limit \
+	linalg \
+	quattest \
+	simulationtime \
+	structure \
+	unitstest
+
 # define some util programs
-bin_PROGRAMS = foucault inertianav mechanic structure tiretestrig coordsys
+noinst_PROGRAMS = \
+	drop \
+	foucault \
+	inertianav \
+	mechanic \
+	structure \
+	tiretestrig \
+	coordsys \
+	$(TESTS)
 
-# define some unit tests
-check_PROGRAMS = constintegral harmonic limit linalg quattest \
-                 simulationtime structure unitstest
-TESTS          = $(check_PROGRAMS)
+constintegral_SOURCES = constintegral.cpp
+constintegral_LDADD = ../OpenFDM/libOpenFDM.la
 
-tiretestrig_SOURCES = tiretestrig.cpp
-tiretestrig_LDADD = ../OpenFDM/libOpenFDM.la
-
 coordsys_SOURCES = coordsys.cpp
 coordsys_LDADD = ../OpenFDM/libOpenFDM.la
 
-unitstest_SOURCES = unitstest.cpp
-unitstest_LDADD = ../OpenFDM/libOpenFDM.la
+drop_SOURCES = drop.cpp
+drop_LDADD = ../OpenFDM/libOpenFDM.la
 
-quattest_SOURCES = quattest.cpp
-quattest_LDADD = ../OpenFDM/libOpenFDM.la
+foucault_SOURCES = foucault.cpp
+foucault_LDADD = ../OpenFDM/libOpenFDM.la
 
-mechanic_SOURCES = mechanic.cpp
-mechanic_LDADD = ../OpenFDM/libOpenFDM.la
+harmonic_SOURCES = harmonic.cpp
+harmonic_LDADD = ../OpenFDM/libOpenFDM.la
 
 inertianav_SOURCES = inertianav.cpp
 inertianav_LDADD = ../OpenFDM/libOpenFDM.la
 
+limit_SOURCES = limit.cpp
+limit_LDADD = ../OpenFDM/libOpenFDM.la
+
 linalg_SOURCES = linalg.cpp
 linalg_LDADD = ../OpenFDM/libOpenFDM.la
 
-foucault_SOURCES = foucault.cpp
-foucault_LDADD = ../OpenFDM/libOpenFDM.la
+mechanic_SOURCES = mechanic.cpp
+mechanic_LDADD = ../OpenFDM/libOpenFDM.la
 
-structure_SOURCES = structure.cpp
-structure_LDADD = ../OpenFDM/libOpenFDM.la
+quattest_SOURCES = quattest.cpp
+quattest_LDADD = ../OpenFDM/libOpenFDM.la
 
 simulationtime_SOURCES = simulationtime.cpp
 simulationtime_LDADD = ../OpenFDM/libOpenFDM.la
 
-constintegral_SOURCES = constintegral.cpp
-constintegral_LDADD = ../OpenFDM/libOpenFDM.la
+structure_SOURCES = structure.cpp
+structure_LDADD = ../OpenFDM/libOpenFDM.la
 
-harmonic_SOURCES = harmonic.cpp
-harmonic_LDADD = ../OpenFDM/libOpenFDM.la
+tiretestrig_SOURCES = tiretestrig.cpp
+tiretestrig_LDADD = ../OpenFDM/libOpenFDM.la
 
-limit_SOURCES = limit.cpp
-limit_LDADD = ../OpenFDM/libOpenFDM.la
+unitstest_SOURCES = unitstest.cpp
+unitstest_LDADD = ../OpenFDM/libOpenFDM.la

Added: branches/OpenFDM-StateSeparation/src/test/drop.cpp
===================================================================
--- branches/OpenFDM-StateSeparation/src/test/drop.cpp	2009-07-17 18:02:41 UTC (rev 1007)
+++ branches/OpenFDM-StateSeparation/src/test/drop.cpp	2009-07-17 18:03:15 UTC (rev 1008)
@@ -0,0 +1,61 @@
+#include &lt;OpenFDM/ConstModel.h&gt;
+#include &lt;OpenFDM/Group.h&gt;
+#include &lt;OpenFDM/InternalInteract.h&gt;
+#include &lt;OpenFDM/LinearSpringDamper.h&gt;
+#include &lt;OpenFDM/Mass.h&gt;
+#include &lt;OpenFDM/MobileRootJoint.h&gt;
+#include &lt;OpenFDM/RevoluteJoint.h&gt;
+#include &lt;OpenFDM/RigidBody.h&gt;
+#include &lt;OpenFDM/ExternalInteract.h&gt;
+#include &lt;OpenFDM/System.h&gt;
+#include &lt;OpenFDM/SystemOutput.h&gt;
+
+using namespace OpenFDM;
+
+Node* buildDrop()
+{
+  // A simple free falling mass.
+  SharedPtr&lt;Group&gt; group = new Group(&quot;Group&quot;);
+
+  MobileRootJoint* mobileRootJoint = new MobileRootJoint(&quot;Root Joint&quot;);
+  group-&gt;addChild(mobileRootJoint);
+
+  RigidBody* rigidBody = new RigidBody(&quot;Rigid Body&quot;);
+  rigidBody-&gt;addLink(&quot;externalInteractLink&quot;);
+  group-&gt;addChild(rigidBody);
+
+  Mass* mass = new Mass(&quot;Mass&quot;, 1, InertiaMatrix(1, 0, 0, 1, 0, 1));
+  group-&gt;addChild(mass);
+
+  ExternalInteract* externalInteract = new ExternalInteract(&quot;ExternalInteract&quot;);
+  externalInteract-&gt;setPosition(mass-&gt;getPosition());
+  externalInteract-&gt;setEnableAllOutputs(true);
+  group-&gt;addChild(externalInteract);
+
+  group-&gt;connect(mobileRootJoint-&gt;getPort(&quot;link&quot;),
+                 rigidBody-&gt;getPort(&quot;link0&quot;));
+  group-&gt;connect(rigidBody-&gt;getPort(&quot;link1&quot;),
+                 mass-&gt;getPort(&quot;link&quot;));
+  group-&gt;connect(rigidBody-&gt;getPort(&quot;externalInteractLink&quot;),
+                 externalInteract-&gt;getPort(&quot;link&quot;));
+
+  return group.release();
+}
+
+int main()
+{
+  SharedPtr&lt;System&gt; system = new System(&quot;System&quot;, buildDrop());
+
+  system-&gt;attach(SystemOutput::newDefaultSystemOutput(&quot;drop&quot;));
+
+  if (!system-&gt;init())
+    return 1;
+
+  system-&gt;simulate(10);
+
+  return 0;
+}
+
+// Kabelbaum &lt;-&gt; PortBundle ??? Original Kabelbaum == Cabel Bundle
+// Oder Cable Set &lt;-&gt; Port Set???
+


Property changes on: branches/OpenFDM-StateSeparation/src/test/drop.cpp
___________________________________________________________________
Name: svn:eol-style
   + native

Modified: branches/OpenFDM-StateSeparation/src/test/mechanic.cpp
===================================================================
--- branches/OpenFDM-StateSeparation/src/test/mechanic.cpp	2009-07-17 18:02:41 UTC (rev 1007)
+++ branches/OpenFDM-StateSeparation/src/test/mechanic.cpp	2009-07-17 18:03:15 UTC (rev 1008)
@@ -12,45 +12,21 @@
 
 using namespace OpenFDM;
 
+/// sensible test cases:
+/// drop: gravity
+/// throw: just this test with a different start condition
+/// harmonic oszilator: compare with 2nd order linear system
+/// arrow: see if the tip stays in front
+/// satellit: coriolis
+/// paris pendulum: coriolis
+
 Node* buildSimpleMechanicExample()
 {
-  /// sensible test cases:
-  /// drop: gravity
-  /// throw: just this test with a different start condition
-  /// harmonic oszilator: compare with 2nd order linear system
-  /// arrow: see if the tip stays in front
-  /// satellit: coriolis
-  /// paris pendulum: coriolis
-
   SharedPtr&lt;Group&gt; group = new Group(&quot;G&quot;);
 
   MobileRootJoint* mobileRootJoint = new MobileRootJoint(&quot;Root Joint&quot;);
   group-&gt;addChild(mobileRootJoint);
-  RigidBody* rigidBody = new RigidBody(&quot;Rigid Body&quot;);
-  rigidBody-&gt;addLink(&quot;externalInteractLink&quot;);
-  group-&gt;addChild(rigidBody);
-  Mass* mass = new Mass(&quot;Mass&quot;, 1, InertiaMatrix(1, 0, 0, 1, 0, 1));
-  group-&gt;addChild(mass);
 
-  ExternalInteract* externalInteract = new ExternalInteract(&quot;ExternalInteract&quot;);
-  externalInteract-&gt;setPosition(mass-&gt;getPosition());
-  externalInteract-&gt;setEnableAllOutputs(true);
-  group-&gt;addChild(externalInteract);
-
-  group-&gt;connect(mobileRootJoint-&gt;getPort(&quot;link&quot;), rigidBody-&gt;getPort(&quot;link0&quot;));
-  group-&gt;connect(rigidBody-&gt;getPort(&quot;link1&quot;), mass-&gt;getPort(&quot;link&quot;));
-  group-&gt;connect(rigidBody-&gt;getPort(&quot;externalInteractLink&quot;), externalInteract-&gt;getPort(&quot;link&quot;));
-
-  return group.release();
-}
-
-Node* buildSimpleMechanicExample2()
-{
-  SharedPtr&lt;Group&gt; group = new Group(&quot;G&quot;);
-
-  MobileRootJoint* mobileRootJoint = new MobileRootJoint(&quot;Root Joint&quot;);
-  group-&gt;addChild(mobileRootJoint);
-
   RigidBody *rigidBody = new RigidBody(&quot;Rigid Body&quot;);
   rigidBody-&gt;addLink(&quot;link2&quot;);
   rigidBody-&gt;addLink(&quot;externalInteractLink&quot;);
@@ -133,8 +109,7 @@
 
 int main()
 {
-//   SharedPtr&lt;System&gt; system = new System(&quot;System&quot;, buildSimpleMechanicExample());
-  SharedPtr&lt;System&gt; system = new System(&quot;System&quot;, buildSimpleMechanicExample2());
+  SharedPtr&lt;System&gt; system = new System(&quot;System&quot;, buildSimpleMechanicExample());
 
   system-&gt;attach(SystemOutput::newDefaultSystemOutput(&quot;mechanic&quot;));
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000969.html">[OpenFDM-svn] r1007 - branches/OpenFDM-StateSeparation/src/OpenFDM
</A></li>
	<LI>Next message: <A HREF="000971.html">[OpenFDM-svn] r1009 - branches/OpenFDM-StateSeparation/src/test
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#970">[ date ]</a>
              <a href="thread.html#970">[ thread ]</a>
              <a href="subject.html#970">[ subject ]</a>
              <a href="author.html#970">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openfdm-svn">More information about the OpenFDM-svn
mailing list</a><br>
</body></html>
