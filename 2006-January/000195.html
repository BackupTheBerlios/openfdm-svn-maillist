<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenFDM-svn] r214 - trunk/OpenFDM/src/OpenFDM
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openfdm-svn/2006-January/index.html" >
   <LINK REL="made" HREF="mailto:openfdm-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenFDM-svn%5D%20r214%20-%20trunk/OpenFDM/src/OpenFDM&In-Reply-To=%3C200601211244.k0LCibvC010180%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000194.html">
   <LINK REL="Next"  HREF="000196.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenFDM-svn] r214 - trunk/OpenFDM/src/OpenFDM</H1>
    <B>frohlich at berlios.de</B> 
    <A HREF="mailto:openfdm-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenFDM-svn%5D%20r214%20-%20trunk/OpenFDM/src/OpenFDM&In-Reply-To=%3C200601211244.k0LCibvC010180%40sheep.berlios.de%3E"
       TITLE="[OpenFDM-svn] r214 - trunk/OpenFDM/src/OpenFDM">frohlich at berlios.de
       </A><BR>
    <I>Sat Jan 21 13:44:37 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000194.html">[OpenFDM-svn] r213 - trunk/OpenFDM/src/OpenFDM
</A></li>
        <LI>Next message: <A HREF="000196.html">[OpenFDM-svn] r215 - trunk/OpenFDM/src/JSBSim
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#195">[ date ]</a>
              <a href="thread.html#195">[ thread ]</a>
              <a href="subject.html#195">[ subject ]</a>
              <a href="author.html#195">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: frohlich
Date: 2006-01-21 13:44:27 +0100 (Sat, 21 Jan 2006)
New Revision: 214

Modified:
   trunk/OpenFDM/src/OpenFDM/AeroForce.cpp
   trunk/OpenFDM/src/OpenFDM/AirSpring.cpp
   trunk/OpenFDM/src/OpenFDM/DiscreteIntegrator.cpp
   trunk/OpenFDM/src/OpenFDM/Force.cpp
   trunk/OpenFDM/src/OpenFDM/Force.h
   trunk/OpenFDM/src/OpenFDM/Input.cpp
   trunk/OpenFDM/src/OpenFDM/RevoluteActuator.cpp
   trunk/OpenFDM/src/OpenFDM/SimpleContact.cpp
   trunk/OpenFDM/src/OpenFDM/SimpleContact.h
   trunk/OpenFDM/src/OpenFDM/SimpleGear.cpp
   trunk/OpenFDM/src/OpenFDM/WheelContact.cpp
   trunk/OpenFDM/src/OpenFDM/WheelContact.h
Log:
Review some properties if they should be stored


Modified: trunk/OpenFDM/src/OpenFDM/AeroForce.cpp
===================================================================
--- trunk/OpenFDM/src/OpenFDM/AeroForce.cpp	2006-01-21 11:56:51 UTC (rev 213)
+++ trunk/OpenFDM/src/OpenFDM/AeroForce.cpp	2006-01-21 12:44:27 UTC (rev 214)
@@ -30,59 +30,6 @@
                     Property(this, &amp;AeroForce::getWingArea, &amp;AeroForce::setWingArea));
   addStoredProperty(&quot;coord&quot;,
                     Property(this, &amp;AeroForce::getCoord, &amp;AeroForce::setCoord));
-
-  addProperty(&quot;altitude&quot;,
-              Property(this, &amp;AeroForce::getAltitude));
-  addProperty(&quot;aboveGroundLevel&quot;,
-              Property(this, &amp;AeroForce::getAboveGroundLevel));
-
-  addProperty(&quot;trueSpeed&quot;,
-              Property(this, &amp;AeroForce::getTrueSpeed));
-  addProperty(&quot;dynamicPressure&quot;,
-              Property(this, &amp;AeroForce::getDynamicPressure));
-  addProperty(&quot;alpha&quot;,
-              Property(this, &amp;AeroForce::getAlpha));
-  addProperty(&quot;alphaDot&quot;,
-              Property(this, &amp;AeroForce::getAlphaDot));
-  addProperty(&quot;beta&quot;,
-              Property(this, &amp;AeroForce::getBeta));
-  addProperty(&quot;betaDot&quot;,
-              Property(this, &amp;AeroForce::getBetaDot));
-  addProperty(&quot;mach&quot;,
-              Property(this, &amp;AeroForce::getMach));
-  addProperty(&quot;machNumber&quot;,
-              Property(this, &amp;AeroForce::getMachNumber));
-  addProperty(&quot;trueSpeedUW&quot;,
-              Property(this, &amp;AeroForce::getTrueSpeedUW));
-  addProperty(&quot;wingSpanOver2Speed&quot;,
-              Property(this, &amp;AeroForce::getWingSpanOver2Speed));
-  addProperty(&quot;coordOver2Speed&quot;,
-              Property(this, &amp;AeroForce::getCoordOver2Speed));
-  addProperty(&quot;hOverWingSpan&quot;,
-              Property(this, &amp;AeroForce::getHOverWingSpan));
-
-  addProperty(&quot;pressure&quot;,
-              Property(this, &amp;AeroForce::getPressure));
-  addProperty(&quot;density&quot;,
-              Property(this, &amp;AeroForce::getDensity));
-  addProperty(&quot;soundSpeed&quot;,
-              Property(this, &amp;AeroForce::getSoundSpeed));
-  addProperty(&quot;temperature&quot;,
-              Property(this, &amp;AeroForce::getTemperature));
-
-  addProperty(&quot;u&quot;,
-              Property(this, &amp;AeroForce::getBodyU));
-  addProperty(&quot;v&quot;,
-              Property(this, &amp;AeroForce::getBodyV));
-  addProperty(&quot;w&quot;,
-              Property(this, &amp;AeroForce::getBodyW));
-  addProperty(&quot;p&quot;,
-              Property(this, &amp;AeroForce::getBodyP));
-  addProperty(&quot;q&quot;,
-              Property(this, &amp;AeroForce::getBodyQ));
-  addProperty(&quot;r&quot;,
-              Property(this, &amp;AeroForce::getBodyR));
-
   addOutputPort(&quot;wingSpan&quot;, this, &amp;AeroForce::getWingSpan);
   addOutputPort(&quot;wingArea&quot;, this, &amp;AeroForce::getWingArea);
   addOutputPort(&quot;coord&quot;, this, &amp;AeroForce::getCoord);

Modified: trunk/OpenFDM/src/OpenFDM/AirSpring.cpp
===================================================================
--- trunk/OpenFDM/src/OpenFDM/AirSpring.cpp	2006-01-21 11:56:51 UTC (rev 213)
+++ trunk/OpenFDM/src/OpenFDM/AirSpring.cpp	2006-01-21 12:44:27 UTC (rev 214)
@@ -30,7 +30,7 @@
   addStoredProperty(&quot;maxCompression&quot;, Property(this, &amp;AirSpring::getMaxCompression, &amp;AirSpring::setMaxCompression));
   addStoredProperty(&quot;minCompression&quot;, Property(this, &amp;AirSpring::getMinCompression, &amp;AirSpring::setMinCompression));
   addStoredProperty(&quot;maxDamperConstant&quot;, Property(this, &amp;AirSpring::getMaxDamperConstant, &amp;AirSpring::setMaxDamperConstant));
-  addProperty(&quot;minDamperConstant&quot;, Property(this, &amp;AirSpring::getMinDamperConstant, &amp;AirSpring::setMinDamperConstant));
+  addStoredProperty(&quot;minDamperConstant&quot;, Property(this, &amp;AirSpring::getMinDamperConstant, &amp;AirSpring::setMinDamperConstant));
 
   setNumInputPorts(2);
   setInputPortName(0, &quot;position&quot;);

Modified: trunk/OpenFDM/src/OpenFDM/DiscreteIntegrator.cpp
===================================================================
--- trunk/OpenFDM/src/OpenFDM/DiscreteIntegrator.cpp	2006-01-21 11:56:51 UTC (rev 213)
+++ trunk/OpenFDM/src/OpenFDM/DiscreteIntegrator.cpp	2006-01-21 12:44:27 UTC (rev 214)
@@ -20,9 +20,9 @@
   setNumOutputPorts(1);
   setOutputPort(0, &quot;output&quot;, this, &amp;DiscreteIntegrator::getIntegralOutput);
 
-  addProperty(&quot;initialValue&quot;, Property(this, &amp;DiscreteIntegrator::getInitialValue, &amp;DiscreteIntegrator::setInitialValue));
-  addProperty(&quot;minSaturation&quot;, Property(this, &amp;DiscreteIntegrator::getMinSaturation, &amp;DiscreteIntegrator::setMinSaturation));
-  addProperty(&quot;maxSaturation&quot;, Property(this, &amp;DiscreteIntegrator::getMaxSaturation, &amp;DiscreteIntegrator::setMaxSaturation));
+  addStoredProperty(&quot;initialValue&quot;, Property(this, &amp;DiscreteIntegrator::getInitialValue, &amp;DiscreteIntegrator::setInitialValue));
+  addStoredProperty(&quot;minSaturation&quot;, Property(this, &amp;DiscreteIntegrator::getMinSaturation, &amp;DiscreteIntegrator::setMinSaturation));
+  addStoredProperty(&quot;maxSaturation&quot;, Property(this, &amp;DiscreteIntegrator::getMaxSaturation, &amp;DiscreteIntegrator::setMaxSaturation));
 }
 
 DiscreteIntegrator::~DiscreteIntegrator(void)

Modified: trunk/OpenFDM/src/OpenFDM/Force.cpp
===================================================================
--- trunk/OpenFDM/src/OpenFDM/Force.cpp	2006-01-21 11:56:51 UTC (rev 213)
+++ trunk/OpenFDM/src/OpenFDM/Force.cpp	2006-01-21 12:44:27 UTC (rev 214)
@@ -14,6 +14,8 @@
   END_OPENFDM_OBJECT_DEF
 BEGIN_OPENFDM_OBJECT_DEF(InternalForce)
   END_OPENFDM_OBJECT_DEF
+BEGIN_OPENFDM_OBJECT_DEF(LineForce)
+  END_OPENFDM_OBJECT_DEF
 
 Force::Force(const std::string&amp; name, unsigned numParents) :
   Interact(name, numParents)

Modified: trunk/OpenFDM/src/OpenFDM/Force.h
===================================================================
--- trunk/OpenFDM/src/OpenFDM/Force.h	2006-01-21 11:56:51 UTC (rev 213)
+++ trunk/OpenFDM/src/OpenFDM/Force.h	2006-01-21 12:44:27 UTC (rev 214)
@@ -31,8 +31,8 @@
   {
     mMountFrame = new FreeFrame(name);
 
-    addProperty(&quot;position&quot;, Property(this, &amp;ExternalForce::getPosition, &amp;ExternalForce::setPosition));
-    addProperty(&quot;orientation&quot;, Property(this, &amp;ExternalForce::getOrientation, &amp;ExternalForce::setOrientation));
+    addStoredProperty(&quot;position&quot;, Property(this, &amp;ExternalForce::getPosition, &amp;ExternalForce::setPosition));
+    addStoredProperty(&quot;orientation&quot;, Property(this, &amp;ExternalForce::getOrientation, &amp;ExternalForce::setOrientation));
   }
   virtual ~ExternalForce(void) {}
 
@@ -93,10 +93,10 @@
     mMountFrame[0] = new FreeFrame(name  + &quot;&lt;0&gt;&quot;);
     mMountFrame[1] = new FreeFrame(name  + &quot;&lt;1&gt;&quot;);
 
-    addProperty(&quot;position0&quot;, Property(this, &amp;InternalForce::getPosition0, &amp;InternalForce::setPosition0));
-    addProperty(&quot;orientation0&quot;, Property(this, &amp;InternalForce::getOrientation0, &amp;InternalForce::setOrientation0));
-    addProperty(&quot;position1&quot;, Property(this, &amp;InternalForce::getPosition1, &amp;InternalForce::setPosition1));
-    addProperty(&quot;orientation1&quot;, Property(this, &amp;InternalForce::getOrientation1, &amp;InternalForce::setOrientation1));
+    addStoredProperty(&quot;position0&quot;, Property(this, &amp;InternalForce::getPosition0, &amp;InternalForce::setPosition0));
+    addStoredProperty(&quot;orientation0&quot;, Property(this, &amp;InternalForce::getOrientation0, &amp;InternalForce::setOrientation0));
+    addStoredProperty(&quot;position1&quot;, Property(this, &amp;InternalForce::getPosition1, &amp;InternalForce::setPosition1));
+    addStoredProperty(&quot;orientation1&quot;, Property(this, &amp;InternalForce::getOrientation1, &amp;InternalForce::setOrientation1));
 
   }
   virtual ~InternalForce(void) {}
@@ -160,15 +160,12 @@
   Vector6 mForce;
 };
 
-class LineForce :
-    public InternalForce {
+class LineForce : public InternalForce {
+  OPENFDM_OBJECT(LineForce, InternalForce);
 public:
   LineForce(const std::string&amp; name) :
     InternalForce(name)
   {
-    addProperty(&quot;relPos&quot;, Property(this, &amp;LineForce::getRelPos));
-    addProperty(&quot;relVel&quot;, Property(this, &amp;LineForce::getRelVel));
-
     addOutputPort(&quot;relPos&quot;, this, &amp;LineForce::getRelPos);
     addOutputPort(&quot;relVel&quot;, this, &amp;LineForce::getRelVel);
 

Modified: trunk/OpenFDM/src/OpenFDM/Input.cpp
===================================================================
--- trunk/OpenFDM/src/OpenFDM/Input.cpp	2006-01-21 11:56:51 UTC (rev 213)
+++ trunk/OpenFDM/src/OpenFDM/Input.cpp	2006-01-21 12:44:27 UTC (rev 214)
@@ -16,8 +16,6 @@
   setNumOutputPorts(1);
   setOutputPort(0, &quot;output&quot;, this, &amp;Input::getOutputValue);
 
-  addProperty(&quot;inputValue&quot;,
-              Property(this, &amp;Input::getInputValue, &amp;Input::setInputValue));
   addStoredProperty(&quot;inputGain&quot;,
                     Property(this, &amp;Input::getInputGain, &amp;Input::setInputGain));
   addStoredProperty(&quot;inputName&quot;,
@@ -109,7 +107,6 @@
   setNumInputPorts(1);
   setInputPortName(0, &quot;input&quot;);
 
-  addProperty(&quot;value&quot;, Property(this, &amp;Output::getValue));
   addStoredProperty(&quot;outputGain&quot;,
                     Property(this, &amp;Output::getOutputGain, &amp;Output::setOutputGain));
   addStoredProperty(&quot;outputName&quot;,

Modified: trunk/OpenFDM/src/OpenFDM/RevoluteActuator.cpp
===================================================================
--- trunk/OpenFDM/src/OpenFDM/RevoluteActuator.cpp	2006-01-21 11:56:51 UTC (rev 213)
+++ trunk/OpenFDM/src/OpenFDM/RevoluteActuator.cpp	2006-01-21 12:44:27 UTC (rev 214)
@@ -25,7 +25,7 @@
 
 RevoluteActuator::RevoluteActuator(const std::string&amp; name) :
   Joint(name),
-  mMaxVel(1),
+  mMaxVel(10),
   mVelGain(1e2),
   mVelDotGain(1e2)
 {

Modified: trunk/OpenFDM/src/OpenFDM/SimpleContact.cpp
===================================================================
--- trunk/OpenFDM/src/OpenFDM/SimpleContact.cpp	2006-01-21 11:56:51 UTC (rev 213)
+++ trunk/OpenFDM/src/OpenFDM/SimpleContact.cpp	2006-01-21 12:44:27 UTC (rev 214)
@@ -21,6 +21,10 @@
   mSpringConst = 0;
   mSpringDamp = 0;
   mFrictionCoef = 0;
+
+  addStoredProperty(&quot;springConstant&quot;, Property(this, &amp;SimpleContact::getSpringConstant, &amp;SimpleContact::setSpringConstant));
+  addStoredProperty(&quot;springDamping&quot;, Property(this, &amp;SimpleContact::getSpringDamping, &amp;SimpleContact::setSpringDamping));
+  addStoredProperty(&quot;frictionCoeficient&quot;, Property(this, &amp;SimpleContact::getFrictionCoeficient, &amp;SimpleContact::setFrictionCoeficient));
 }
 
 SimpleContact::~SimpleContact(void)

Modified: trunk/OpenFDM/src/OpenFDM/SimpleContact.h
===================================================================
--- trunk/OpenFDM/src/OpenFDM/SimpleContact.h	2006-01-21 11:56:51 UTC (rev 213)
+++ trunk/OpenFDM/src/OpenFDM/SimpleContact.h	2006-01-21 12:44:27 UTC (rev 214)
@@ -20,19 +20,19 @@
   SimpleContact(const std::string&amp; name);
   virtual ~SimpleContact(void);
 
-  real_type getSpringConstant(void) const
+  const real_type&amp; getSpringConstant(void) const
   { return mSpringConst; }
-  void setSpringConstant(real_type springConst)
+  void setSpringConstant(const real_type&amp; springConst)
   { mSpringConst = springConst; }
 
-  real_type getSpringDamping(void) const
+  const real_type&amp; getSpringDamping(void) const
   { return mSpringDamp; }
-  void setSpringDamping(real_type springDamp)
+  void setSpringDamping(const real_type&amp; springDamp)
   { mSpringDamp = springDamp; }
 
-  real_type getFrictionCoeficient(void) const
+  const real_type&amp; getFrictionCoeficient(void) const
   { return mFrictionCoef; }
-  void setFrictionCoeficient(real_type frictionCoef)
+  void setFrictionCoeficient(const real_type&amp; frictionCoef)
   { mFrictionCoef = frictionCoef; }
 
   // Compute the plane normal force.

Modified: trunk/OpenFDM/src/OpenFDM/SimpleGear.cpp
===================================================================
--- trunk/OpenFDM/src/OpenFDM/SimpleGear.cpp	2006-01-21 11:56:51 UTC (rev 213)
+++ trunk/OpenFDM/src/OpenFDM/SimpleGear.cpp	2006-01-21 12:44:27 UTC (rev 214)
@@ -26,21 +26,24 @@
   mSpringDamp = 0;
   mFrictionCoef = 0;
 
+  // ??? FIXME
   addProperty(&quot;steeringAngle&quot;,
               Property(this, &amp;SimpleGear::getSteeringAngle,
                        &amp;SimpleGear::setSteeringAngle));
   addProperty(&quot;brake&quot;,
               Property(this, &amp;SimpleGear::getBrake, &amp;SimpleGear::setBrake));
-  addProperty(&quot;springConstant&quot;,
-              Property(this, &amp;SimpleGear::getSpringConstant,
-                       &amp;SimpleGear::setSpringConstant));
-  addProperty(&quot;springDamping&quot;,
-              Property(this, &amp;SimpleGear::getSpringDamping,
-                       &amp;SimpleGear::setSpringDamping));
-  addProperty(&quot;frictionCoeficient&quot;,
-              Property(this, &amp;SimpleGear::getFrictionCoeficient,
-                       &amp;SimpleGear::setFrictionCoeficient));
 
+
+  addStoredProperty(&quot;springConstant&quot;,
+                    Property(this, &amp;SimpleGear::getSpringConstant,
+                             &amp;SimpleGear::setSpringConstant));
+  addStoredProperty(&quot;springDamping&quot;,
+                    Property(this, &amp;SimpleGear::getSpringDamping,
+                             &amp;SimpleGear::setSpringDamping));
+  addStoredProperty(&quot;frictionCoeficient&quot;,
+                    Property(this, &amp;SimpleGear::getFrictionCoeficient,
+                             &amp;SimpleGear::setFrictionCoeficient));
+
   unsigned inputPortBase = getNumInputPorts();
   setNumInputPorts(inputPortBase + 2);
   setInputPortName(inputPortBase + 0, &quot;brakeCommand&quot;);

Modified: trunk/OpenFDM/src/OpenFDM/WheelContact.cpp
===================================================================
--- trunk/OpenFDM/src/OpenFDM/WheelContact.cpp	2006-01-21 11:56:51 UTC (rev 213)
+++ trunk/OpenFDM/src/OpenFDM/WheelContact.cpp	2006-01-21 12:44:27 UTC (rev 214)
@@ -24,6 +24,11 @@
   mSpringDamping = 0;
   mFrictionCoeficient = 0.8;
 
+  addStoredProperty(&quot;wheelRadius&quot;, Property(this, &amp;WheelContact::getWheelRadius, &amp;WheelContact::setWheelRadius));
+  addStoredProperty(&quot;springConstant&quot;, Property(this, &amp;WheelContact::getSpringConstant, &amp;WheelContact::setSpringConstant));
+  addStoredProperty(&quot;springDamping&quot;, Property(this, &amp;WheelContact::getSpringDamping, &amp;WheelContact::setSpringDamping));
+  addStoredProperty(&quot;frictionCoeficient&quot;, Property(this, &amp;WheelContact::getFrictionCoeficient, &amp;WheelContact::setFrictionCoeficient));
+
   // FIXME??
   addSampleTime(SampleTime::PerTimestep);
   addSampleTime(SampleTime::Continous);

Modified: trunk/OpenFDM/src/OpenFDM/WheelContact.h
===================================================================
--- trunk/OpenFDM/src/OpenFDM/WheelContact.h	2006-01-21 11:56:51 UTC (rev 213)
+++ trunk/OpenFDM/src/OpenFDM/WheelContact.h	2006-01-21 12:44:27 UTC (rev 214)
@@ -33,24 +33,24 @@
   computeFrictionForce(real_type normForce, const Vector2&amp; vel,
                        real_type omegaR, real_type friction) const;
 
-  void setWheelRadius(real_type wheelRadius)
+  void setWheelRadius(const real_type&amp; wheelRadius)
   { mWheelRadius = wheelRadius; }
-  real_type getWheelRadius(void) const
+  const real_type&amp; getWheelRadius(void) const
   { return mWheelRadius; }
 
-  void setSpringConstant(real_type springConstant)
+  void setSpringConstant(const real_type&amp; springConstant)
   { mSpringConstant = springConstant; }
-  real_type getSpringConstant(void) const
+  const real_type&amp; getSpringConstant(void) const
   { return mSpringConstant; }
 
-  void setSpringDamping(real_type springDamping)
+  void setSpringDamping(const real_type&amp; springDamping)
   { mSpringDamping = springDamping; }
-  real_type getSpringDamping(void) const
+  const real_type&amp; getSpringDamping(void) const
   { return mSpringDamping; }
 
-  void setFrictionCoeficient(real_type frictionCoeficient)
+  void setFrictionCoeficient(const real_type&amp; frictionCoeficient)
   { mFrictionCoeficient = frictionCoeficient; }
-  real_type getFrictionCoeficient(void) const
+  const real_type&amp; getFrictionCoeficient(void) const
   { return mFrictionCoeficient; }
 private:
   void getGround(real_type t);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000194.html">[OpenFDM-svn] r213 - trunk/OpenFDM/src/OpenFDM
</A></li>
	<LI>Next message: <A HREF="000196.html">[OpenFDM-svn] r215 - trunk/OpenFDM/src/JSBSim
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#195">[ date ]</a>
              <a href="thread.html#195">[ thread ]</a>
              <a href="subject.html#195">[ subject ]</a>
              <a href="author.html#195">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openfdm-svn">More information about the OpenFDM-svn
mailing list</a><br>
</body></html>
